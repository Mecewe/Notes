# 域名指向主机IP地址，通过域名:8080才能访问网站，去掉后面的8080；或者其他的端口号，直接使用域名访问网站

前期在腾讯云上购买了域名，并在域名管理中，将域名指向了主机ip地址，tomcat中指定了端口8006未使用默认的8080。

这样就可以使用域名:8006/项目名称访问网站，但是这样看起来也是泄露了端口号，就想着去掉域名后面的端口号，经过多方查找，发现可以使用nginx实现端口转发，其他的方式暂不知道。

首先，

1.在linux中安装nginx，参照百度的文章；

2.在nginx的conf/nginx.conf中配置参数：

![image-20200115181801293](/Users/mecewe/Library/Application Support/typora-user-images/image-20200115181801293.png)

3.只需要上面的设置，启动nginx即可。

就可以使用域名直接访问网站了。



# nginx使用非80端口时url带端口号的解决办法

在nginx中配置server侦听非80端口时，我们在访问时会在url中加入对应的端口号，如：http://xxx.xxx.xxx:8006/,但如果在nginx服务器前有另一台服务器作为用户首先访问的web服务器，这台服务器设置了端口转发，将80端口获得的请求转发到nginx中的对应端口中，如8006，这时用户使用的url是没有端口号，但nginx会自动增加端口号到url上，很可能导致用户访问失败，可以将location 中增加proxy_set_header Host $host，即可解决此问题（在实际工作遇到，特此记下）
